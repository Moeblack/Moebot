# 监控与管理后台

Bot Agent 提供了一个基于 FastAPI + Jinja2 + SQLite 的全功能管理后台，用于实时观察和干预 AI 的行为。

## 启动方式

管理后台由 `main.py` 在机器人启动时**自动开启**。

如果你需要独立启动后台，可以使用以下命令：
```bash
python scripts/monitor_web.py
```
默认访问地址：`http://localhost:8000`（支持内网访问）

## 主要功能

### 1. 实时看板 (Dashboard)
- **活跃任务**: 显示当前正在处理、正在思考或处于专注模式的会话。
- **AI 日志**: 详细记录每一次 API 请求的 Payload、响应内容、耗时和模型。
- **决策记录**: 展示 AI 为何决定回复或不回复的逻辑依据。

### 2. 记忆管理 (Memories)
- **聊天历史**: 在线编辑或删除特定会话的消息记录，用于修正 AI 认知。
- **情节记忆**: 查看并编辑 AI 自动生成的历史摘要。
- **用户印象**: 实时查看 AI 对不同用户形成的“第一印象”和“长期评价”。

### 3. 人格配置 (Personas)
- **动态编辑**: 支持在线修改基础人格、增删性格特质。
- **实时同步**: 修改后立即生效，无需重启机器人。

### 4. 提示词管理 (Prompts)
- **结构化模板**: 支持在线编辑 `system_prompt`、`entry_decision` 等核心模板。
- **XML 调试**: 可以直接观察组装后的 XML 结构。

## 数据存储

监控数据存储在 `data/ai_monitor.db` (SQLite) 中，包括：
- `ai_logs`: API 交互明细。
- `ai_decisions`: 决策过程。
- `config_changes`: 配置变更历史。
- `active_tasks`: 实时任务状态。
